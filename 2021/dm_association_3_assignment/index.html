<!DOCTYPE html>
<html lang="en-us">
  <link href="//use.fontawesome.com/releases/v5.9.0/css/all.css" rel="stylesheet">
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  <script async src="https://cdn.splitbee.io/sb.js"></script>
  <script src="https://cdn.splitbee.io/sb-ab.js"></script>
  <meta name="author" content="M1sty">
  
  
  
  <link rel="prev" href="https://www.m1sty.com/2021/dm_association_4_more/" />
  <link rel="next" href="https://www.m1sty.com/2021/dm_association_2_exercise/" />
  <link rel="canonical" href="https://www.m1sty.com/2021/dm_association_3_assignment/" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           Association：Assignment | M1sty
       
  </title>
  <meta name="title" content="Association：Assignment | M1sty">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  
  
 

<script type="application/ld+json">
 "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https:\/\/www.m1sty.com"
    },
    "articleSection" : "posts",
    "name" : "Association：Assignment",
    "headline" : "Association：Assignment",
    "description" : "Association Frequent Itemsets Qustion 1 Qustion 1-1  Table 1 shows a list of baskets as well as the items they contain. For example, this could be the set of products bought by each customer during a single trip to a grocery store. Using the A-priori algorithm, find all frequent itemsets with support threshold 0.4 (i.e. in this example they occur at least 40% of 7 times, i.e. at least three times.",
    "inLanguage" : "en-us",
    "author" : "Misty",
    "creator" : "Misty",
    "publisher": "Misty",
    "accountablePerson" : "Misty",
    "copyrightHolder" : "Misty",
    "copyrightYear" : "2021",
    "datePublished": "2021-01-03 00:00:00 \u002b0000 UTC",
    "dateModified" : "2021-01-03 00:00:00 \u002b0000 UTC",
    "url" : "https:\/\/www.m1sty.com\/2021\/dm_association_3_assignment\/",
    "wordCount" : "671",
    "keywords" : [ "Association","HKU", "M1sty"]
}
</script>

</head>

  


  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://www.m1sty.com">M1sty</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="About">About</a>
                
                <a class="menu-item" href="/links/" title="Links">Links</a>
                
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://www.m1sty.com">M1sty</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="About">About</a>
                
                <a class="menu-item" href="/links/" title="Links">Links</a>
                
        </div>
    </div>
</nav>
    	 <main class="main">
          <div class="container">
      		
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">Association：Assignment</h1>
        <div class="post-meta">
        <i class="far fa-folder-open"></i>
            <span class="post-category"> in
                <a href="https://www.m1sty.com/categories/data-mining/"> Data Mining </a>
                    
            </span>
          <span class="post-time"> on
        <time datetime=2021-01-03 itemprop="datePublished">January 3, 2021</time>
           </span> (<span class="post-word-count">671 words)</span>
        </div>
    
    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title"></h2>
  
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#frequent-itemsets">Frequent Itemsets</a>
      <ul>
        <li><a href="#qustion-1">Qustion 1</a></li>
        <li><a href="#answer-1">Answer 1</a></li>
      </ul>
    </li>
    <li><a href="#practical-exercise-on-fi-and-ar">Practical exercise on FI and AR</a>
      <ul>
        <li><a href="#question-4">Question 4</a></li>
        <li><a href="#answer-4">Answer 4</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
<script type="text/javascript">
  window.onload = function () {
    var fix = $('.post-toc');
    var end = $('.post-comment');
    var fixTop = fix.offset().top, fixHeight = fix.height();
    var endTop, miss;
    var offsetTop = fix[0].offsetTop;
    $(window).scroll(function () {
      var docTop = Math.max(document.body.scrollTop, document.documentElement.scrollTop);
      if (end.length > 0) {
        endTop = end.offset().top;
        miss = endTop - docTop - fixHeight;
      }
      if (fixTop < docTop) {
        fix.css({ 'position': 'fixed' });
        if ((end.length > 0) && (endTop < (docTop + fixHeight))) {
          fix.css({ top: miss });
        } else {
          fix.css({ top: 0 });
        }
      } else {
        fix.css({ 'position': 'absolute' });
        fix.css({ top: offsetTop });
      }
    })
  }
</script> 
    
    </header>
    <div class="post-content">
        

        
            
        

        
        
     
          
          
          

          
          
          

          <h1 id="association">Association</h1>
<h2 id="frequent-itemsets">Frequent Itemsets</h2>
<h3 id="qustion-1">Qustion 1</h3>
<h4 id="qustion-1-1">Qustion 1-1</h4>
<ul>
<li>Table 1 shows a list of baskets as well as the items they contain. For example, this could be the set of products bought by each customer during a single trip to a grocery store. Using the A-priori algorithm, find all frequent itemsets with support threshold 0.4 (i.e. in this example they occur at least 40% of 7 times, i.e. at least three times.) In particular you should specify for each pass of the algorithm, the frequent itemsets, as well as the counters (and their values) kept in main memory by the A-priori algorithm.</li>
</ul>
<h4 id="qustion-1-2">Qustion 1-2</h4>
<ul>
<li>Use the results from the previous step so as to compute the confidence and support of the rule b → d. In order to answer this question, are the results from the previous step sufficient or some information is missing?</li>
</ul>
<h4 id="qustion-1-3">Qustion 1-3</h4>
<ul>
<li>Table 2 shows a new list of baskets as well as the items they contain. Using the PCY algorithm, find all frequent itemsets with support threshold 0.33 (i.e. in this example they occur at least 33% of 6, i.e. at least two times.) To this end, we are going to use the hash function f(i,j) = (i+j)%3 (% and mod are equivalent). In particular you should specify for each pass of the algorithm, the frequent itemsets, as well as all the counters (and their values) kept in main memory by the PCY algorithm.</li>
</ul>
<p><img src="https://raw.githubusercontent.com/M1styDay/image_hosting/master/hugo_images/20210313234142.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/M1styDay/image_hosting/master/hugo_images/20210313234207.png" alt=""></p>
<h3 id="answer-1">Answer 1</h3>
<p><img src="https://raw.githubusercontent.com/M1styDay/image_hosting/master/hugo_images/20210316162335.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/M1styDay/image_hosting/master/hugo_images/20210316162403.png" alt=""></p>
<h2 id="practical-exercise-on-fi-and-ar">Practical exercise on FI and AR</h2>
<h3 id="question-4">Question 4</h3>
<p><img src="https://raw.githubusercontent.com/M1styDay/image_hosting/master/hugo_images/20210316162615.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/M1styDay/image_hosting/master/hugo_images/20210316164248.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/M1styDay/image_hosting/master/hugo_images/20210316164324.png" alt=""></p>
<h3 id="answer-4">Answer 4</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> math
<span style="color:#f92672">import</span> pandas <span style="color:#f92672">as</span> pd
<span style="color:#f92672">from</span> mlxtend.preprocessing <span style="color:#f92672">import</span> TransactionEncoder
<span style="color:#f92672">from</span> mlxtend.frequent_patterns <span style="color:#f92672">import</span> apriori
<span style="color:#f92672">from</span> mlxtend.frequent_patterns <span style="color:#f92672">import</span> association_rules

data <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;mammographic_masses.csv&#34;</span>,delimiter<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;,&#34;</span>,header<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>)

d<span style="color:#f92672">=</span>data<span style="color:#f92672">.</span>values<span style="color:#f92672">.</span>tolist()

<span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">0</span>,len(d)):
    j<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
    <span style="color:#66d9ef">while</span>(True):
        <span style="color:#66d9ef">if</span> (type(d[i][j])<span style="color:#f92672">==</span>float <span style="color:#f92672">and</span> math<span style="color:#f92672">.</span>isnan(d[i][j])) :
            <span style="color:#66d9ef">del</span> d[i][j]
            j<span style="color:#f92672">-=</span><span style="color:#ae81ff">1</span>
        j<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
        <span style="color:#66d9ef">if</span> (j<span style="color:#f92672">&gt;</span>len(d[i])<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
            <span style="color:#66d9ef">break</span>

data

<span style="color:#75715e">#adding attributes</span>
<span style="color:#66d9ef">print</span>(d[:<span style="color:#ae81ff">2</span>])
<span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(d)):
    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range (len(d[i])):
        d[i][j]<span style="color:#f92672">=</span>data<span style="color:#f92672">.</span>columns[j] <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;=&#34;</span> <span style="color:#f92672">+</span>str(d[i][j])
<span style="color:#66d9ef">print</span>(d[:<span style="color:#ae81ff">2</span>])


te <span style="color:#f92672">=</span> TransactionEncoder()
te_ary <span style="color:#f92672">=</span> te<span style="color:#f92672">.</span>fit(d)<span style="color:#f92672">.</span>transform(d)

df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(te_ary, columns<span style="color:#f92672">=</span>te<span style="color:#f92672">.</span>columns_)

<span style="color:#75715e">#computing frequent itemsets and association rules</span>
frequent_itemsets <span style="color:#f92672">=</span> apriori(df, min_support<span style="color:#f92672">=</span><span style="color:#ae81ff">0.2</span>, use_colnames<span style="color:#f92672">=</span>True)

a<span style="color:#f92672">=</span>association_rules(frequent_itemsets, metric<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;confidence&#34;</span>, min_threshold<span style="color:#f92672">=</span><span style="color:#ae81ff">0.9</span>)

<span style="color:#75715e">#visualizing association rules results</span>
a[[<span style="color:#e6db74">&#34;antecedents&#34;</span>,<span style="color:#e6db74">&#34;consequents&#34;</span>,<span style="color:#e6db74">&#34;support&#34;</span>,<span style="color:#e6db74">&#34;confidence&#34;</span>]]


<span style="color:#75715e">#computing frequent itemsets and association rules</span>
frequent_itemsets <span style="color:#f92672">=</span> apriori(df, min_support<span style="color:#f92672">=</span><span style="color:#ae81ff">0.1</span>, use_colnames<span style="color:#f92672">=</span>True)

a<span style="color:#f92672">=</span>association_rules(frequent_itemsets, metric<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;confidence&#34;</span>, min_threshold<span style="color:#f92672">=</span><span style="color:#ae81ff">0.9</span>)

<span style="color:#75715e">#visualizing association rules results</span>
a[[<span style="color:#e6db74">&#34;antecedents&#34;</span>,<span style="color:#e6db74">&#34;consequents&#34;</span>,<span style="color:#e6db74">&#34;support&#34;</span>,<span style="color:#e6db74">&#34;confidence&#34;</span>]]

<span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">33</span>):
    <span style="color:#66d9ef">if</span> (<span style="color:#e6db74">&#34;Severity=1&#34;</span> <span style="color:#f92672">in</span> a[<span style="color:#e6db74">&#34;consequents&#34;</span>][i] ):
        <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;the&#34;</span><span style="color:#f92672">+</span><span style="color:#e6db74">&#34; &#34;</span><span style="color:#f92672">+</span>str(i)<span style="color:#f92672">+</span><span style="color:#e6db74">&#34; &#34;</span><span style="color:#f92672">+</span><span style="color:#e6db74">&#34;Severity=1&#34;</span>)
        <span style="color:#66d9ef">print</span>(a[<span style="color:#e6db74">&#34;antecedents&#34;</span>][i])

<span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">33</span>):
    <span style="color:#66d9ef">if</span> (<span style="color:#e6db74">&#34;Severity=0&#34;</span> <span style="color:#f92672">in</span> a[<span style="color:#e6db74">&#34;consequents&#34;</span>][i] ):
        <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;the&#34;</span><span style="color:#f92672">+</span><span style="color:#e6db74">&#34; &#34;</span><span style="color:#f92672">+</span>str(i)<span style="color:#f92672">+</span><span style="color:#e6db74">&#34; &#34;</span><span style="color:#f92672">+</span><span style="color:#e6db74">&#34;Severity=0&#34;</span>)
        <span style="color:#66d9ef">print</span>(a[<span style="color:#e6db74">&#34;antecedents&#34;</span>][i])

<span style="color:#75715e">#computing frequent itemsets and association rules</span>
frequent_itemsets <span style="color:#f92672">=</span> apriori(df, min_support<span style="color:#f92672">=</span><span style="color:#ae81ff">0.01</span>, use_colnames<span style="color:#f92672">=</span>True)

a<span style="color:#f92672">=</span>association_rules(frequent_itemsets, metric<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;confidence&#34;</span>, min_threshold<span style="color:#f92672">=</span><span style="color:#ae81ff">0.01</span>)

<span style="color:#75715e">#visualizing association rules results</span>
a[[<span style="color:#e6db74">&#34;antecedents&#34;</span>,<span style="color:#e6db74">&#34;consequents&#34;</span>,<span style="color:#e6db74">&#34;support&#34;</span>,<span style="color:#e6db74">&#34;confidence&#34;</span>]]

<span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">4676</span>):
    <span style="color:#66d9ef">if</span> (<span style="color:#e6db74">&#34;Age=35&#34;</span> <span style="color:#f92672">in</span> a[<span style="color:#e6db74">&#34;antecedents&#34;</span>][i] <span style="color:#f92672">and</span> <span style="color:#e6db74">&#34;Severity=0&#34;</span> <span style="color:#f92672">in</span> a[<span style="color:#e6db74">&#34;consequents&#34;</span>][i] ):
        <span style="color:#66d9ef">print</span>(a[<span style="color:#e6db74">&#34;antecedents&#34;</span>][i],a[<span style="color:#e6db74">&#34;consequents&#34;</span>][i],a[<span style="color:#e6db74">&#34;support&#34;</span>][i],a[<span style="color:#e6db74">&#34;confidence&#34;</span>][i])

</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> math
<span style="color:#f92672">import</span> pandas <span style="color:#f92672">as</span> pd
<span style="color:#f92672">from</span> mlxtend.preprocessing <span style="color:#f92672">import</span> TransactionEncoder
<span style="color:#f92672">from</span> mlxtend.frequent_patterns <span style="color:#f92672">import</span> apriori
<span style="color:#f92672">from</span> mlxtend.frequent_patterns <span style="color:#f92672">import</span> association_rules

missing_values <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#34;?&#34;</span>]

data2 <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_excel(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;mammographic_masses_v2.xlsx&#34;</span>,na_values <span style="color:#f92672">=</span> missing_values)

data2<span style="color:#f92672">.</span>apply(<span style="color:#66d9ef">lambda</span> x: sum(x<span style="color:#f92672">.</span>isnull())<span style="color:#f92672">/</span>len(x),axis<span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>) 

<span style="color:#75715e"># pre-processing missing values</span>
<span style="color:#75715e"># Age BI-RADS(means)</span>
data2<span style="color:#f92672">.</span>Age<span style="color:#f92672">.</span>fillna(data2<span style="color:#f92672">.</span>Age<span style="color:#f92672">.</span>mean(),inplace<span style="color:#f92672">=</span>True) 

data2<span style="color:#f92672">.</span>Age<span style="color:#f92672">.</span>mean()

data2<span style="color:#f92672">.</span>BI_RADS<span style="color:#f92672">.</span>fillna(data2<span style="color:#f92672">.</span>BI_RADS<span style="color:#f92672">.</span>mean(),inplace<span style="color:#f92672">=</span>True) 

data2<span style="color:#f92672">.</span>BI_RADS<span style="color:#f92672">.</span>mean()

<span style="color:#75715e"># pre-processing missing values</span>
<span style="color:#75715e"># shape Margin Density(mode)</span>

data2<span style="color:#f92672">.</span>Shape<span style="color:#f92672">.</span>fillna(data2<span style="color:#f92672">.</span>Shape<span style="color:#f92672">.</span>mode()[<span style="color:#ae81ff">0</span>],inplace<span style="color:#f92672">=</span>True) 

data2<span style="color:#f92672">.</span>Margin<span style="color:#f92672">.</span>fillna(data2<span style="color:#f92672">.</span>Margin<span style="color:#f92672">.</span>mode()[<span style="color:#ae81ff">0</span>],inplace<span style="color:#f92672">=</span>True) 

data2<span style="color:#f92672">.</span>Density<span style="color:#f92672">.</span>fillna(data2<span style="color:#f92672">.</span>Density<span style="color:#f92672">.</span>mode()[<span style="color:#ae81ff">0</span>],inplace<span style="color:#f92672">=</span>True)  

data2<span style="color:#f92672">.</span>apply(<span style="color:#66d9ef">lambda</span> x: sum(x<span style="color:#f92672">.</span>isnull())<span style="color:#f92672">/</span>len(x),axis<span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>)

<span style="color:#75715e"># Age gap 20</span>
w <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">20</span>,<span style="color:#ae81ff">40</span>,<span style="color:#ae81ff">60</span>,<span style="color:#ae81ff">80</span>,<span style="color:#ae81ff">100</span>]

data2[<span style="color:#e6db74">&#39;Age_group&#39;</span>] <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>cut(data2[<span style="color:#e6db74">&#39;Age&#39;</span>],bins <span style="color:#f92672">=</span> w)

data3 <span style="color:#f92672">=</span> data2<span style="color:#f92672">.</span>drop(labels <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Age&#39;</span>, axis <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>)

data3<span style="color:#f92672">.</span>head()

d <span style="color:#f92672">=</span> data3<span style="color:#f92672">.</span>values<span style="color:#f92672">.</span>tolist()

<span style="color:#75715e">#removing nan values</span>
<span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">0</span>,len(d)):
    j<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
    <span style="color:#66d9ef">while</span>(True):
        <span style="color:#66d9ef">if</span> (type(d[i][j])<span style="color:#f92672">==</span>float <span style="color:#f92672">and</span> math<span style="color:#f92672">.</span>isnan(d[i][j])) :
            <span style="color:#66d9ef">del</span> d[i][j]
            j<span style="color:#f92672">-=</span><span style="color:#ae81ff">1</span>
        j<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
        <span style="color:#66d9ef">if</span> (j<span style="color:#f92672">&gt;</span>len(d[i])<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
            <span style="color:#66d9ef">break</span>

data3

<span style="color:#75715e">#adding attributes</span>
<span style="color:#66d9ef">print</span>(d[:<span style="color:#ae81ff">2</span>])
<span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(d)):
    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range (len(d[i])):
        d[i][j]<span style="color:#f92672">=</span>data3<span style="color:#f92672">.</span>columns[j] <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;=&#34;</span> <span style="color:#f92672">+</span>str(d[i][j])
<span style="color:#66d9ef">print</span>(d[:<span style="color:#ae81ff">2</span>])


te <span style="color:#f92672">=</span> TransactionEncoder()
te_ary <span style="color:#f92672">=</span> te<span style="color:#f92672">.</span>fit(d)<span style="color:#f92672">.</span>transform(d)

df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(te_ary, columns<span style="color:#f92672">=</span>te<span style="color:#f92672">.</span>columns_)

<span style="color:#75715e">#computing frequent itemsets and association rules</span>
frequent_itemsets <span style="color:#f92672">=</span> apriori(df, min_support<span style="color:#f92672">=</span><span style="color:#ae81ff">0.1</span>, use_colnames<span style="color:#f92672">=</span>True)

a<span style="color:#f92672">=</span>association_rules(frequent_itemsets, metric<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;confidence&#34;</span>, min_threshold<span style="color:#f92672">=</span><span style="color:#ae81ff">0.9</span>)

<span style="color:#75715e">#visualizing association rules results</span>
a[[<span style="color:#e6db74">&#34;antecedents&#34;</span>,<span style="color:#e6db74">&#34;consequents&#34;</span>,<span style="color:#e6db74">&#34;support&#34;</span>,<span style="color:#e6db74">&#34;confidence&#34;</span>]]

<span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">81</span>):
    <span style="color:#66d9ef">if</span> (<span style="color:#e6db74">&#34;Age_group=(0, 20]&#34;</span> <span style="color:#f92672">in</span> a[<span style="color:#e6db74">&#34;antecedents&#34;</span>][i] <span style="color:#f92672">and</span> <span style="color:#e6db74">&#34;Severity=0&#34;</span> <span style="color:#f92672">in</span> a[<span style="color:#e6db74">&#34;consequents&#34;</span>][i]):
        <span style="color:#66d9ef">print</span>(a[<span style="color:#e6db74">&#34;antecedents&#34;</span>][i],a[<span style="color:#e6db74">&#34;consequents&#34;</span>][i],a[<span style="color:#e6db74">&#34;support&#34;</span>][i],a[<span style="color:#e6db74">&#34;confidence&#34;</span>][i])
    <span style="color:#66d9ef">if</span> (<span style="color:#e6db74">&#34;Age_group=(20, 40]&#34;</span> <span style="color:#f92672">in</span> a[<span style="color:#e6db74">&#34;antecedents&#34;</span>][i] <span style="color:#f92672">and</span> <span style="color:#e6db74">&#34;Severity=0&#34;</span> <span style="color:#f92672">in</span> a[<span style="color:#e6db74">&#34;consequents&#34;</span>][i]):
        <span style="color:#66d9ef">print</span>(a[<span style="color:#e6db74">&#34;antecedents&#34;</span>][i],a[<span style="color:#e6db74">&#34;consequents&#34;</span>][i],a[<span style="color:#e6db74">&#34;support&#34;</span>][i],a[<span style="color:#e6db74">&#34;confidence&#34;</span>][i])
    <span style="color:#66d9ef">if</span> (<span style="color:#e6db74">&#34;Age_group=(40, 60]&#34;</span> <span style="color:#f92672">in</span> a[<span style="color:#e6db74">&#34;antecedents&#34;</span>][i] <span style="color:#f92672">and</span> <span style="color:#e6db74">&#34;Severity=0&#34;</span> <span style="color:#f92672">in</span> a[<span style="color:#e6db74">&#34;consequents&#34;</span>][i]):
        <span style="color:#66d9ef">print</span>(a[<span style="color:#e6db74">&#34;antecedents&#34;</span>][i],a[<span style="color:#e6db74">&#34;consequents&#34;</span>][i],a[<span style="color:#e6db74">&#34;support&#34;</span>][i],a[<span style="color:#e6db74">&#34;confidence&#34;</span>][i])
    <span style="color:#66d9ef">if</span> (<span style="color:#e6db74">&#34;Age_group=(60, 80]&#34;</span> <span style="color:#f92672">in</span> a[<span style="color:#e6db74">&#34;antecedents&#34;</span>][i] <span style="color:#f92672">and</span> <span style="color:#e6db74">&#34;Severity=0&#34;</span> <span style="color:#f92672">in</span> a[<span style="color:#e6db74">&#34;consequents&#34;</span>][i]):
        <span style="color:#66d9ef">print</span>(a[<span style="color:#e6db74">&#34;antecedents&#34;</span>][i],a[<span style="color:#e6db74">&#34;consequents&#34;</span>][i],a[<span style="color:#e6db74">&#34;support&#34;</span>][i],a[<span style="color:#e6db74">&#34;confidence&#34;</span>][i])
    <span style="color:#66d9ef">if</span> (<span style="color:#e6db74">&#34;Age_group=(80, 100]&#34;</span> <span style="color:#f92672">in</span> a[<span style="color:#e6db74">&#34;antecedents&#34;</span>][i] <span style="color:#f92672">and</span> <span style="color:#e6db74">&#34;Severity=0&#34;</span> <span style="color:#f92672">in</span> a[<span style="color:#e6db74">&#34;consequents&#34;</span>][i]):
        <span style="color:#66d9ef">print</span>(a[<span style="color:#e6db74">&#34;antecedents&#34;</span>][i],a[<span style="color:#e6db74">&#34;consequents&#34;</span>][i],a[<span style="color:#e6db74">&#34;support&#34;</span>][i],a[<span style="color:#e6db74">&#34;confidence&#34;</span>][i])

<span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">81</span>):
    <span style="color:#66d9ef">if</span> (<span style="color:#e6db74">&#34;Age_group=(0, 20]&#34;</span> <span style="color:#f92672">in</span> a[<span style="color:#e6db74">&#34;antecedents&#34;</span>][i] <span style="color:#f92672">and</span> <span style="color:#e6db74">&#34;Severity=1&#34;</span> <span style="color:#f92672">in</span> a[<span style="color:#e6db74">&#34;consequents&#34;</span>][i]):
        <span style="color:#66d9ef">print</span>(a[<span style="color:#e6db74">&#34;antecedents&#34;</span>][i],a[<span style="color:#e6db74">&#34;consequents&#34;</span>][i],a[<span style="color:#e6db74">&#34;support&#34;</span>][i],a[<span style="color:#e6db74">&#34;confidence&#34;</span>][i])
    <span style="color:#66d9ef">if</span> (<span style="color:#e6db74">&#34;Age_group=(20, 40]&#34;</span> <span style="color:#f92672">in</span> a[<span style="color:#e6db74">&#34;antecedents&#34;</span>][i] <span style="color:#f92672">and</span> <span style="color:#e6db74">&#34;Severity=1&#34;</span> <span style="color:#f92672">in</span> a[<span style="color:#e6db74">&#34;consequents&#34;</span>][i]):
        <span style="color:#66d9ef">print</span>(a[<span style="color:#e6db74">&#34;antecedents&#34;</span>][i],a[<span style="color:#e6db74">&#34;consequents&#34;</span>][i],a[<span style="color:#e6db74">&#34;support&#34;</span>][i],a[<span style="color:#e6db74">&#34;confidence&#34;</span>][i])
    <span style="color:#66d9ef">if</span> (<span style="color:#e6db74">&#34;Age_group=(40, 60]&#34;</span> <span style="color:#f92672">in</span> a[<span style="color:#e6db74">&#34;antecedents&#34;</span>][i] <span style="color:#f92672">and</span> <span style="color:#e6db74">&#34;Severity=1&#34;</span> <span style="color:#f92672">in</span> a[<span style="color:#e6db74">&#34;consequents&#34;</span>][i]):
        <span style="color:#66d9ef">print</span>(a[<span style="color:#e6db74">&#34;antecedents&#34;</span>][i],a[<span style="color:#e6db74">&#34;consequents&#34;</span>][i],a[<span style="color:#e6db74">&#34;support&#34;</span>][i],a[<span style="color:#e6db74">&#34;confidence&#34;</span>][i])
    <span style="color:#66d9ef">if</span> (<span style="color:#e6db74">&#34;Age_group=(60, 80]&#34;</span> <span style="color:#f92672">in</span> a[<span style="color:#e6db74">&#34;antecedents&#34;</span>][i] <span style="color:#f92672">and</span> <span style="color:#e6db74">&#34;Severity=1&#34;</span> <span style="color:#f92672">in</span> a[<span style="color:#e6db74">&#34;consequents&#34;</span>][i]):
        <span style="color:#66d9ef">print</span>(a[<span style="color:#e6db74">&#34;antecedents&#34;</span>][i],a[<span style="color:#e6db74">&#34;consequents&#34;</span>][i],a[<span style="color:#e6db74">&#34;support&#34;</span>][i],a[<span style="color:#e6db74">&#34;confidence&#34;</span>][i])
    <span style="color:#66d9ef">if</span> (<span style="color:#e6db74">&#34;Age_group=(80, 100]&#34;</span> <span style="color:#f92672">in</span> a[<span style="color:#e6db74">&#34;antecedents&#34;</span>][i] <span style="color:#f92672">and</span> <span style="color:#e6db74">&#34;Severity=1&#34;</span> <span style="color:#f92672">in</span> a[<span style="color:#e6db74">&#34;consequents&#34;</span>][i]):
        <span style="color:#66d9ef">print</span>(a[<span style="color:#e6db74">&#34;antecedents&#34;</span>][i],a[<span style="color:#e6db74">&#34;consequents&#34;</span>][i],a[<span style="color:#e6db74">&#34;support&#34;</span>][i],a[<span style="color:#e6db74">&#34;confidence&#34;</span>][i])
</code></pre></div>
    </div>

    <div class="post-copyright">
             
            <p class="copyright-item">
                <span>Author:</span>
                <span>M1sty </span>
                </p>
            
           
             
            <p class="copyright-item">
                    <span>Link:</span>
                    <a href=https://www.m1sty.com/2021/dm_association_3_assignment/>https://www.m1sty.com/2021/dm_association_3_assignment/</span>
            </p>
            
             
            <p class="copyright-item lincese">
                本文采用<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可
            </p>
            
    </div>

  
    <div class="post-tags">
        
            <section>
            <i class="iconfont icon-tag"></i>Tag(s): 
            
            <span class="tag"><a href="https://www.m1sty.com/tags/association/">
                    #Association</a></span>
            
            <span class="tag"><a href="https://www.m1sty.com/tags/hku/">
                    #HKU</a></span>
            
            </section>
        
        <section>
                <a href="javascript:window.history.back();">back</a></span> · 
                <span><a href="https://www.m1sty.com">home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="https://www.m1sty.com/2021/dm_association_4_more/" class="prev" rel="prev" title="Association：Supplement"><i class="iconfont icon-left"></i>&nbsp;Association：Supplement</a>
         
        
        <a href="https://www.m1sty.com/2021/dm_association_2_exercise/" class="next" rel="next" title="Association：Exercise">Association：Exercise&nbsp;<i class="iconfont icon-right"></i></a>
        
    </div>

    <div class="post-comment">
          
                 
          
    </div>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2020 - 2021</span>
        
        <span class="with-love">
    	 <i class="iconfont icon-love"></i> 
         </span>
         
            <span class="author" itemprop="copyrightHolder"><a href="https://www.m1sty.com">M1sty</a> | </span> 
         

         
		  <span> <a href="https://www.m1sty.com" target="_blank" rel="external nofollow">Data Analyst</a> => <a href="https://www.m1sty.com" target="_blank" rel="external nofollow">Data Scientist</a></span> 
    </div>
</footer>












    
     <link href="//lib.baomitu.com/lightgallery/1.6.11/css/lightgallery.min.css" rel="stylesheet">  
      
     <script src="/js/vendor_gallery.min.js" async="" ></script>
    
  




<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [['$','$'], ['\\(','\\)']],
            displayMath: [['$$','$$'], ['\[','\]']],
            processEscapes: true,
            processEnvironments: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
            TeX: {
                equationNumbers: { autoNumber: "AMS" },
                extensions: ["AMSmath.js", "AMSsymbols.js"]
            }
        }
    });
</script>
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>
     </div>
  </body>
</html>
